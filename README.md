# OpenAIImages Bot
При получении фотографии от пользователя отправляет её модели GPT-4-Vision с использованием указанного промпта.
Если к фотографии прикреплено описание, оно также используется при анализе изображения нейросетью.
## Установка
Первым делом, необходимо создать виртуальное окружение
```
python3 -m venv venv
source venv/bin/activate
```
После этого установите зависимости из файла
```
pip install -r requirements.txt
```
Как будет запускаться бот - зависит только от вас, но есть одно важное требование:  
При первом запуске у вас должна быть возможность ввести значения в терминал.  
Будут запрошены 2 параметра: bot_token и openai_token. После ввода они сохранятся в *settings.ini* и в будущем будут браться оттуда.  
После этого бот готов к использованию.
## Использование
Промпт хранится в *prompt.txt*, при желании можете его изменить.
По умолчанию бот будет анализировать изображения с точки зрения превью для видео на Youtube.
## Функционал
### Пакет config
В данном пакете содержатся фунцкии для проверки на наличие, сохранения и получения ключей доступа к боту и OpenAI API.
### Пакет bot
#### funcs
В *files.py* содержатся вспомогательные функции для
 + Конвертации изображения в base64 (для передачи в OpenAI)
 + Генерации случайных названий к сохраняемым изображениям
 + Чтения строки из файла
 + Проверки и создания директории *images*, где хранятся все изображения  

В *gpt.py* содержится функция для отправки сообщения в GPT и получения ответа.

#### handlers

В *user.py* описаны два хэндлера:
 + start отправляет приветственное сообщение
 + get_photo отправляет изображение в GPT и присылает пользователю ответ.

*/bot/main.py* является входной точкой бота. В нём описаны фунцкии для регистрации хэндлеров и старта поллинга.